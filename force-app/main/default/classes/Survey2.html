<template>
    <lightning-card title="Customer Satisfaction Survey">
        <template if:true={showSurvey}>
            <div class="slds-text-align_center slds-m-around_medium">
                <p class="slds-text-heading_small">How satisfied were you with the order?</p>
                <div class="slds-grid slds-grid_align-center slds-wrap slds-m-top_medium">
                    <button 
                        class="slds-m-horizontal_small"
                        data-value="Very Poor"
                        style="
                            font-size: 2.5rem; 
                            transition: transform 0.2s; 
                            border: none; 
                            background: none; 
                            border-radius: 50%; 
                            width: 5rem; 
                            height: 5rem; 
                            display: flex; 
                            flex-direction: column;     
                            justify-content: center; 
                            align-items: center; 
                            cursor: pointer;
                            padding: 0.5rem; 
                            text-align: center;"
                        onmouseover={handleMouseOver}
                        onmouseout={handleMouseOut}
                        onclick={handleEmojiClick}>
                        üò≠
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; line-height: 1.2rem;">Very Poor</div>
                    </button>

                    <button 
                        class="slds-m-horizontal_small"
                        data-value="Poor"
                        style="
                            font-size: 2.5rem; 
                            transition: transform 0.2s; 
                            border: none; 
                            background: none; 
                            border-radius: 50%; 
                            width: 5rem; 
                            height: 5rem; 
                            display: flex; 
                            flex-direction: column;     
                            justify-content: center; 
                            align-items: center; 
                            cursor: pointer;
                            padding: 0.5rem; 
                            text-align: center;"
                        onmouseover={handleMouseOver}
                        onmouseout={handleMouseOut}
                        onclick={handleEmojiClick}>
                        ‚òπÔ∏è
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; line-height: 1.2rem;">Poor</div>
                    </button>

                    <button 
                        class="slds-m-horizontal_small"
                        data-value="Neutral"
                        style="
                            font-size: 2.5rem; 
                            transition: transform 0.2s; 
                            border: none; 
                            background: none; 
                            border-radius: 50%; 
                            width: 5rem; 
                            height: 5rem; 
                            display: flex; 
                            flex-direction: column;     
                            justify-content: center; 
                            align-items: center; 
                            cursor: pointer;
                            padding: 0.5rem; 
                            text-align: center;"
                        onmouseover={handleMouseOver}
                        onmouseout={handleMouseOut}
                        onclick={handleEmojiClick}>
                        üòê
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; line-height: 1.2rem;">Neutral</div>
                    </button>

                    <button 
                        class="slds-m-horizontal_small"
                        data-value="Great"
                        style="
                            font-size: 2.5rem; 
                            transition: transform 0.2s; 
                            border: none; 
                            background: none; 
                            border-radius: 50%; 
                            width: 5rem; 
                            height: 5rem; 
                            display: flex; 
                            flex-direction: column;     
                            justify-content: center; 
                            align-items: center; 
                            cursor: pointer;
                            padding: 0.5rem; 
                            text-align: center;"
                        onmouseover={handleMouseOver}
                        onmouseout={handleMouseOut}
                        onclick={handleEmojiClick}>
                        üôÇ
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; line-height: 1.2rem;">Great</div>
                    </button>

                    <button 
                        class="slds-m-horizontal_small"
                        data-value="Excellent"
                        style="
                            font-size: 2.5rem; 
                            transition: transform 0.2s; 
                            border: none; 
                            background: none; 
                            border-radius: 50%; 
                            width: 5rem; 
                            height: 5rem; 
                            display: flex; 
                            flex-direction: column;     
                            justify-content: center; 
                            align-items: center; 
                            cursor: pointer;
                            padding: 0.5rem; 
                            text-align: center;"
                        onmouseover={handleMouseOver}
                        onmouseout={handleMouseOut}
                        onclick={handleEmojiClick}>
                        üòç
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; line-height: 1.2rem;">Excellent</div>
                    </button>
                </div>

                <!-- Show the text box only for 'Very Poor' -->
                <template if:true={showTextBox}>
                    <div style="display: flex; flex-direction: column; align-items: center; width: 100%;">
                        <lightning-input 
                            label="How can we make your experience better?"
                            value={improvementComment}
                            
                            onchange={handleCommentChange}
                            maxlength="500"
                            class="slds-m-top_small"
                            style="width: 38%; padding: 0.5rem; margin-bottom: 1rem; text-align: center;">
                        </lightning-input>
                    </div>
                </template>
                
                <!-- Submit Button, shown only when an emoji is selected -->
                <template if:true={isSubmitVisible}>
                    <div style="display: flex; justify-content: center; width: 100%;">
                        <lightning-button 
                            label="Submit"
                            variant="brand"
                            class="slds-m-top_medium"
                            style="margin-top: 1rem;"
                            onclick={handleSubmit}>
                        </lightning-button>
                    </div>
                </template>

        <template if:false={showSurvey}>
            <div class="slds-text-align_center slds-m-around_medium">
                <p class="slds-text-heading_medium">Thank you for your feedback!</p>
            </div>
        </template>
    </lightning-card>
</template>
